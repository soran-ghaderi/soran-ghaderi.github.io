/* =====================================================
   SYNTAX HIGHLIGHTING - Pure Shiki with Dual Themes
   
   Shiki generates dual theme output with CSS variables:
   - Light theme: inline style="background-color:#xxx; color:#xxx"
   - Dark theme: --shiki-dark-bg and --shiki-dark CSS variables
   
   CSS switches between them based on .dark class.
   Background color is derived from the theme, not hardcoded.
   ===================================================== */

/* Shiki code blocks - let Shiki's inline style control everything */
pre.shiki,
pre[class*="shiki"],
pre[data-shiki-code] {
  display: block;
  overflow-x: auto;
  margin: 1.5rem 0;
  padding: 1rem; /* Shiki doesn't set padding, we add it */
  border-radius: 0.5rem;
  border: 1px solid var(--pre-border);  /* Subtle border to distinguish from page */
  /* Light mode: uses inline style from Shiki (default) */
  
  code {
    font-family: var(--code-font-family);
    font-size: var(--code-font-size);
    background: transparent;
    padding: 0;
    border: none;
  }
}

/* Light mode: ensure code blocks are visually distinct */
/* Uses --shiki-light-bg if available, falls back to --pre-bg */
body:not(.dark) .shiki,
html:not(.dark) .shiki {
  background-color: var(--pre-bg) !important;
}

body:not(.dark) .shiki span,
html:not(.dark) .shiki span {
  background-color: transparent !important;
}

/* Dark mode: switch to Shiki's --shiki-dark-* CSS variables */
/* These variables are generated by Shiki's dual theme mode */
/* Background only on pre, not on spans */
.dark .shiki,
html.dark .shiki,
body.dark .shiki {
  background-color: var(--shiki-dark-bg) !important;
}

.dark .shiki span,
html.dark .shiki span,
body.dark .shiki span {
  color: var(--shiki-dark) !important;
  background-color: transparent !important;
  /* Optional: font style variations from theme */
  font-style: var(--shiki-dark-font-style) !important;
  font-weight: var(--shiki-dark-font-weight) !important;
  text-decoration: var(--shiki-dark-text-decoration) !important;
}

/* Inline code (not inside pre blocks) */
:not(pre) > code {
  background-color: var(--code-bg);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  font-family: var(--code-font-family);
  font-size: var(--code-font-size);
  color: var(--code-color);
}
